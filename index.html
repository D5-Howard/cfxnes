<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>NES Coffee</title>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css"/>
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        <script type="text/javascript" src="js/NESCoffeeBundled.js"></script>
        <script type="text/javascript" src="js/UI.js"></script>
    </head>
    <body ondragover="allowFileDrop(event)" ondrop="handleDroppedFile(event)">
        <h1>NESCoffee</h1>
        <p>A Nintendo Entertainment System emulator written in CoffeeScript.</p>
        <p>NESCoffee is in early development, so it still isn't working corectly (only few games are playable). 
           The overall performance is also quite slow. Try out <a href="http://fir.sh/projects/jsnes/">JSNES</a> 
           as a better alternative.</p>
        <canvas id="video-output">Your browser does not support canvas.</canvas>
        <div class="section">
            <button id="start-emulator" onclick="startEmulator()">Run emulator</button>
            <button id="stop-emulator" onclick="stopEmulator()">Pause emulator</button>
            <button onclick="pressPower()">Power</button>
            <button onclick="pressReset()">Reset</button>
        </div>
        <div class="section">
            <label for="video-scale">Screen scale</label>
            <select id="video-scale" onchange="setVideoScale(this.value)">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="4">4x</option>
            </select>
            <label for="fps-value">FPS:</label>
            <span id="fps-value"></span>
            <input id="video-debug" type="checkbox" onchange="setVideoDebug(this.checked)"/>
            <label for="video-debug">Show patterns and palettes</label>
        </div>
        <div id="roms-section" class="section">
            Browse <a href="javascript:void(0)" onclick="showROMsDialog()">Game Library</a> or
            <button onclick="$('#rom-file-input').click()">Select ROM file</button> of your game. 
            <input type="file" id="rom-file-input" onchange="handleSelectedFile(event)"/></br>
            You can also drop ROM files directly inside this window to load them.
        </div>
        <p id="record-dialog">Press key or mouse button...</p>
        <p id="roms-dialog"></p>
        <div class="section">
            <div class="sub-section">
                <div class="section">
                    <label for="controller-1">Controller&nbsp;1</label>
                    <select id="controller-1" onchange="setController(1, this.value)">
                        <option value="none">None</option>
                        <option value="joypad">Joypad</option>
                        <option value="zapper">Zapper</option>
                    </select>
                </div>
                <div id="joypad-1" class="section binding">
                    <div class="binding-item">
                        <label for="joypad-1-b">B:</label>
                        <span id="joypad-1-b">---</span>
                        <button onclick="recordControl(1, 'joypad', 'b')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-a">A:</label>
                        <span id="joypad-1-a">---</span>
                        <button onclick="recordControl(1, 'joypad', 'a')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-select">Select:</label>
                        <span id="joypad-1-select">---</span>
                        <button onclick="recordControl(1, 'joypad', 'select')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-start">Start:</label>
                        <span id="joypad-1-start">---</span>
                        <button onclick="recordControl(1, 'joypad', 'start')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-up">Up:</label>
                        <span id="joypad-1-up">---</span>
                        <button onclick="recordControl(1, 'joypad', 'up')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-down">Down:</label>
                        <span id="joypad-1-down">---</span>
                        <button onclick="recordControl(1, 'joypad', 'down')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-left">Left:</label>
                        <span id="joypad-1-left">---</span>
                        <button onclick="recordControl(1, 'joypad', 'left')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-1-right">Right:</label>
                        <span id="joypad-1-right">---:</span>
                        <button onclick="recordControl(1, 'joypad', 'right')">Change</button>
                    </div>
                </div>
                <div id="zapper-1" class="section binding">
                    <div class="binding-item">
                        <label for="zapper-1-light-detector">Light detector:</label>
                        <span id="zapper-1-light-detector">Mouse cursor</span>
                    </div>
                    <div class="binding-item">
                        <label for="zapper-1-trigger">Trigger:</label>
                        <span id="zapper-1-trigger">---</span>
                        <button onclick="recordControl(1, 'zapper', 'trigger')">Change</button>
                    </div>
                </div>
            </div>
            <div class="sub-section">
                <div class="section">
                    <label for="controller-2">Controller&nbsp;2</label>
                    <select id="controller-2" onchange="setController(2, this.value)">
                        <option value="none">None</option>
                        <option value="joypad">Joypad</option>
                        <option value="zapper">Zapper</option>
                    </select>
                </div>
                <div id="joypad-2" class="section binding">
                    <div class="binding-item">
                        <label for="joypad-2-b">B:</label>
                        <span id="joypad-2-b">---</span>
                        <button onclick="recordControl(2, 'joypad', 'b')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-a">A:</label>
                        <span id="joypad-2-a">---</span>
                        <button onclick="recordControl(2, 'joypad', 'a')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-select">Select:</label>
                        <span id="joypad-2-select">---</span>
                        <button onclick="recordControl(2, 'joypad', 'select')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-start">Start:</label>
                        <span id="joypad-2-start">---</span>
                        <button onclick="recordControl(2, 'joypad', 'start')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-up">Up:</label>
                        <span id="joypad-2-up">---</span>
                        <button onclick="recordControl(2, 'joypad', 'up')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-down">Down:</label>
                        <span id="joypad-2-down">---</span>
                        <button onclick="recordControl(2, 'joypad', 'down')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-left">Left:</label>
                        <span id="joypad-2-left">---</span>
                        <button onclick="recordControl(2, 'joypad', 'left')">Change</button>
                    </div>
                    <div class="binding-item">
                        <label for="joypad-2-right">Right:</label>
                        <span id="joypad-2-right">---:</span>
                        <button onclick="recordControl(2, 'joypad', 'right')">Change</button>
                    </div>
                </div>
                <div id="zapper-2" class="section binding">
                    <div class="binding-item">
                        <label for="zapper-2-light-detector">Light detector:</label>
                        <span id="zapper-2-light-detector">Mouse cursor</span>
                    </div>
                    <div class="binding-item">
                        <label for="zapper-2-trigger">Trigger:</label>
                        <span id="zapper-2-trigger">---</span>
                        <button onclick="recordControl(2, 'zapper', 'trigger')">Change</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
